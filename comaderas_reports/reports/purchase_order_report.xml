<?xml version="1.0" encoding="utf-8" ?>
<odoo>
  <data>
       
        <template id="report_print_purchase_order_report">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">                    
                    <div class="header">
                        <img t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)" width="115" height="90"/>
                        <p style="font-size:10vw">
                            <span t-field="o.company_id"></span><br></br>
                            <span>NIT:</span><span t-field="o.company_id.vat"></span>
                        </p>
                    </div>
                    <div class="article o_report_layout_standard">
                        <div class="page">
                            <style>
                                div#separador{
                                width:900px;
                                height:100px;
                                background-color:white;
                                float:left;
                                }
                                div#cuadro{
                                width:250px;
                                height:20px;
                                background-color:white;
                                float:left;
                                }
                                hr.new5 {
                                border: 1px solid black;
                                border-radius: 1px;
                                }
                            </style>
                            <table width="100%">
                                <tr>
                                    <td>
                                        <span t-field="o.picking_type_id"></span>
                                    </td>
                                    <td>
                                        <h4>
                                            <span>ORDEN DE COMPRA No.</span><span> </span><span t-field="o.name"></span>
                                        </h4>
                                    </td>
                                </tr>
                            </table>
                            <br></br>
                            <table width="100%">
                                <tr>
                                    <td><span>Nit:</span><span> </span><span t-field="o.partner_id.vat"></span></td>
                                    <td><span t-field="o.date_planned"></span></td>
                                </tr>
                                <tr>
                                    <td><span>Proveedor:</span><span> </span><span t-field="o.partner_id"></span></td>
                                    <td>Tiempo de entrega dias:</td>
                                </tr>
                                <tr>
                                    <td><span>Direcci贸n:</span><span> </span><span t-field="o.partner_id.street"></span></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><span>C贸digo:</span><span> </span><span t-field="o.partner_ref"></span></td>
                                    <td>Forma de pago:</td>
                                </tr>
                            </table>
                            <br></br>
                            <table width="100%">
                                <tr>
                                    <td><span>Autorizamos despachar los siguientes productos:</span></td>
                                    <td><span>Contacto:</span><span> </span><span></span></td>
                                </tr>
                            </table>
                            <table class="table table-sm o_main_table">
                                <thead>
                                    <tr>
                                        <th><strong>C贸digo</strong></th>
                                        <th><strong>Descripci贸n</strong></th>
                                        <th><strong>Und</strong></th>
                                        <th><strong>Cantidad</strong></th>
                                        <th><strong>Costo unitario</strong></th>
                                        <th><strong>Costo total</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-foreach="o.order_line" t-as="line">
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                            <t t-if="not line.display_type">
                                                <td id="product">
                                                    <span t-field="line.product_id.default_code"/>
                                                </td>
                                                <td id="product">
                                                    <span t-field="line.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="line.product_id.uom_id"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.product_qty"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.price_unit"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                                </td>
                                            </t>
                                            <t t-if="line.display_type == 'line_section'">
                                                <td colspan="99" id="section">
                                                    <span t-field="line.name"/>
                                                </td>
                                                <t t-set="current_section" t-value="line"/>
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-if="line.display_type == 'line_note'">
                                                <td colspan="99" id="note">
                                                    <span t-field="line.name"/>
                                                </td>
                                            </t>
                                        </tr>
                                        <t t-if="current_section and (line_last or o.order_line[line_index+1].display_type == 'line_section')">
                                            <tr class="is-subtotal text-right">
                                                <td colspan="99" id="subtotal">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                            <div id="total" class="row justify-content-end">
                                <div class="col-4">
                                    <table class="table table-sm">
                                        <tr class="border-black">
                                            <td name="td_subtotal_label"><strong>Subtotal</strong></td>
                                            <td class="text-right">
                                                <span t-field="o.amount_untaxed" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td name="td_taxes_label">Taxes</td>
                                            <td class="text-right">
                                                <span t-field="o.amount_tax" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                        <tr class="border-black o_total">
                                            <td name="td_amount_total_label"><strong>Total</strong></td>
                                            <td class="text-right">
                                                <span t-field="o.amount_total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div id="separador"></div>
                            <div id="cuadro" style='float: left; margin: 10px; padding: 5px; text-align: left;'>
                                <hr class="new5"></hr>FIRMA ELABORADOR
                            </div>
                            <div id="cuadro" style='float: left; margin: 10px; padding: 5px; text-align: left;'>
                                <hr class="new5"></hr>FIRMA AUTORIZADA
                            </div>
                            </div>
                    </div>
                    <div class="footer">
                        <p></p>
                    </div>
                </t>
            </t>
        </template>
        
        <report
                id="report_print_template_purchase_order"
                string="Orden de compra comaderas"
                model="purchase.order"
                report_type="qweb-pdf"
                name="comaderas_reports.report_print_purchase_order_report"
        />

        <record id="comaderas_reports.report_print_template_purchase_order" model="ir.actions.report">
            <field name="paperformat_id" ref="comaderas_reports.paperformat_a4_comaderas"/>
        </record>

  </data>
</odoo>
