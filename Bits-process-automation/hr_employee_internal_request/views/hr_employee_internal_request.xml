<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!--Begin View Tree-->
    <record id="hr_employee_internal_request_tree" model="ir.ui.view">
        <field name="name">hr_employee_internal_request_tree</field>
        <field name="model">hr.employee.internal.request</field>
        <field name="arch" type="xml">

            <tree>
              <field name="name" />
              <field name="job_position" />
              <field name="stage_id" />
            </tree>

        </field>
    </record>
    <!--End View Tree-->

    <!--Begin View Form-->
    <record id="hr_employee_internal_request_form" model="ir.ui.view">
      <field name="name">hr_employee_internal_request_form</field>
      <field name="model">hr.employee.internal.request</field>
      <field name="arch" type="xml">

        <form string="Internal Request" class="o_form_project_tasks">
        
          <header>
            <button
              string="Approve" 
              name="action_request_approve"
              type="object"
              class="oe_highlight"
              attrs="{'invisible' :[('internal_request_line_ids', '=', [])]}"/>

            <button
              string="Return"
              name="action_request_return"
              type="object"
              class="oe_highlight"
              attrs="{'invisible': [('stage_id', '!=', 1)]}" />

            <button
              string="Re Sent"
              name="action_request_sent"
              type="object"
              class="oe_highlight"
              attrs="{'invisible': [('stage_id', '!=', 2)]}" />

            <button
              string="In Process"
              name="action_request_process"
              type="object"
              class="oe_highlight"
              attrs="{'invisible': [('stage_id', '!=', 3)]}" />

            <button
              string="Cancel"
              name="action_request_cancel"
              type="object"
              class="oe_highlight"
              attrs="{'invisible': [('stage_id', '!=', 4)]}" />

            <field name="stage_id" widget="statusbar" />
          </header>
          <sheet>
          <div class="oe_title">
                <h1>        
                  <field name="name" placeholder="name" required="1" force_save="1" readonly="1"/>        
                </h1>
          </div>
            <group>
              <group>
                <field name="code"/>
                <field name="tecnology_id" attrs="{&quot;required&quot;: [&quot;|&quot;,[&quot;check_project&quot;,&quot;=&quot;,True],[&quot;check_not_project&quot;,&quot;=&quot;,True]]}" options="{'no_create': True, 'no_create_edit':True}"/>
                <field name="tecnology_name" invisible="1"/>
                <field name="analytic_account_name" invisible="1"/>
                <field name="job_name" invisible="1"/>
                <field name="job_position" required="1" options="{'no_create': True, 'no_create_edit':True}"/>
                <field name="department_id"/>
                <field name="create_date"/>
                <field name="create_uid"/>
                <field name="check_not_project" invisible="1"/>
                <field name="check_project" invisible="1"/>
                <field name="res_user_id" invisible="1"/>
                <field name="department_email" invisible="True"/>
              </group>
              <group>
                <field name="number_of_employees"/>
                <field name="employee_name_id" invisible="True"/>
                <field name="job_name_id" invisible="True"/> 
                <field name="analytic_account_id" required="1" options="{'no_create': True, 'no_create_edit':True}"/>
                <field name="is_internal_request"/>
              </group>
              <field name="description" placeholder="Add description..."/>
            </group>
          <notebook colspan="4">
            <page string="Job profile">
                <field name="job_description"/>
            </page>
            <page string="Stages of the selection process" attrs="{'invisible': [('check_project', '!=', False)]}">
                <field name="internal_request_line_ids">
                  <tree editable="bottom">
                      <field name="internal_appraisal_id" options="{'no_create': True, 'no_create_edit':True}"/>
                      <field name="employee_id" options="{'no_create': True, 'no_create_edit':True}"/>
                  </tree>
                </field>
            </page>
          </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="activity_ids" widget="mail_activity" />
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>

      </field>
    </record>
    <!--End View Form-->

    <!-- Begin View Kanban-->
    <record id="hr_employee_internal_request_kanban" model="ir.ui.view">
      <field name="name">hr_employee_internal_request_kanban</field>
      <field name="model">hr.employee.internal.request</field>
      <field name="arch" type="xml">
        <kanban quick_create="false" default_group_by="stage_id" class="o_kanban_small_column o_opportunity_kanban o_kanban_mobile" archivable="false" group_create="false">
          <field name="name"/>
          <field name="stage_id"/>

          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                <div class="o_kanban_record_top">
                  <!-- fields card -->
                  <div class="o_kanban_record_headings">
                    <strong class="o_kanban_record_title">
                      <field name="name"/>
                    </strong>
                    <br/>
                    <span>
                      <strong>
                        <field name="job_position"/>
                      </strong>
                    </span>
                  </div>
                  <!-- end field card -->
                </div>

                <!-- <div class="o_kanban_record_bottom" t-if="!selection_mode">
                  <div class="oe_kanban_bottom_left">
                    <field name="priority" widget="priority"/>
                    <field name="activity_ids" widget="kanban_activity"/>
                  </div>

                  <div class="oe_kanban_bottom_right" t-if="!selection_mode">
                    <field name="kanban_state" widget="state_selection" />
                  </div>
                </div> -->
              </div>


            </t>
          </templates>

        </kanban>
      </field>
    </record>
    <!--End View Kanban -->

    <record id="view_internal_resquest_search" model="ir.ui.view">
      <field name="name">internal.request.search</field>
      <field name="model">hr.employee.internal.request</field>
      <field name="arch" type="xml">
        <search string="Search internal request">
        <field name="code"/>
        <field name="name"/>
        <filter string="Code" domain="[('code', '!=', '')]" name="has_code"/>
        <filter string="Name" domain="[('name', '!=', False)]" name="has_name"/>
        <group expand="0" string="Group By">
          <filter string="Name" name="name" context="{'group_by': 'name'}"/>
          <filter string="TecnologÃ­a" name="tecnology_id" context="{'group_by': 'tecnology_id'}"/>
          <filter string="Centro de costo" name="analytic_account_id" context="{'group_by': 'analytic_account_id'}"/>
          <filter string="Cargo" name="job_position" context="{'group_by': 'job_position'}"/> 
        </group>
        </search>
      </field>
    </record>

    <record id="sequence_hr_recruitment_score_profile" model="ir.sequence">
           <field name="name">Internal request</field>
           <field name="code">internal.request</field>
           <field name="active">TRUE</field>
           <field name="prefix"></field>
           <field name="padding">6</field>
           <field name="number_next">1</field>
           <field name="number_increment">1</field>
    </record>


  </data>
</odoo>